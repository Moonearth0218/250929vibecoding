import streamlit as st

# ------------------------------
# MBTI â†’ ì§ì—… ì¶”ì²œ (ê³ ë“±í•™ìƒìš©)
# Streamlit Cloudì—ì„œ ë°”ë¡œ ì‹¤í–‰ ê°€ëŠ¥í•œ ë‹¨ì¼ íŒŒì¼
# ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ ì—†ì´ ë™ì‘ (í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ + streamlit)
# ------------------------------

st.set_page_config(page_title="MBTI ì§ì—… ì¶”ì²œ", page_icon="ğŸ¯", layout="centered")

# ê°„ë‹¨í•œ ìŠ¤íƒ€ì¼ë§
st.markdown(
    """
    <style>
      .big-title {font-size: 2rem; font-weight: 800;}
      .tag {display:inline-block; padding:4px 10px; border-radius:999px; background:#f1f5f9; margin-right:6px; font-size:0.85rem}
      .card {border-radius:16px; padding:18px; background:#ffffff; border:1px solid #e5e7eb}
      .soft {color:#64748b}
    </style>
    """,
    unsafe_allow_html=True,
)

# ë°ì´í„° ì •ì˜
MBTI_TYPES = [
    "ISTJ", "ISFJ", "INFJ", "INTJ",
    "ISTP", "ISFP", "INFP", "INTP",
    "ESTP", "ESFP", "ENFP", "ENTP",
    "ESTJ", "ESFJ", "ENFJ", "ENTJ",
]

CAREER_DB = {
    "ISTJ": {
        "traits": ["ì²´ê³„ì ", "ì±…ì„ê°", "ì‹ ë¢°ë„ ë†’ìŒ"],
        "careers": [
            ("ê³µë¬´ì›", "ê·œì •ê³¼ ì ˆì°¨ ê¸°ë°˜ì˜ ì•ˆì •ì  ì—…ë¬´"),
            ("íšŒê³„ì‚¬", "ì •í™•í•œ ìˆ˜ì¹˜ ê´€ë¦¬ì™€ ìë£Œ ê²€ì¦"),
            ("í’ˆì§ˆê´€ë¦¬ ì—”ì§€ë‹ˆì–´", "í‘œì¤€ ì¤€ìˆ˜Â·ê²€ì‚¬Â·ê°œì„  í™œë™")
        ],
    },
    "ISFJ": {
        "traits": ["ë°°ë ¤", "ì„±ì‹¤", "ì‹¤ìš©ì "],
        "careers": [
            ("ê°„í˜¸ì‚¬", "ì„¸ì‹¬í•œ ë³´ì‚´í•Œê³¼ íŒ€ì›Œí¬"),
            ("ì´ˆë“±êµì‚¬", "ê¸°ì´ˆ í•™ìŠµ ì§€ë„ì™€ ëŒë´„"),
            ("ì¹˜ìœ„ìƒì‚¬", "ì •í™•Â·ê¹¨ë—í•¨Â·ëŒ€ì¸ ì„œë¹„ìŠ¤")
        ],
    },
    "INFJ": {
        "traits": ["í†µì°°", "ê°€ì¹˜ì§€í–¥", "ê¹Šì€ ê³µê°"],
        "careers": [
            ("ìƒë‹´ì‹¬ë¦¬ì‚¬", "ê°œì¸ì˜ ì„±ì¥ ì§€ì›"),
            ("ì‚¬íšŒë³µì§€ ê¸°íšì", "ì‚¬íšŒì  ì„íŒ©íŠ¸ ì„¤ê³„"),
            ("ì½˜í…ì¸  ê¸°íšì", "ì˜ë¯¸ ì¤‘ì‹¬ ìŠ¤í† ë¦¬í…”ë§")
        ],
    },
    "INTJ": {
        "traits": ["ì „ëµ", "ë¶„ì„", "ë…ë¦½ì„±"],
        "careers": [
            ("ë°ì´í„° ì‚¬ì´ì–¸í‹°ìŠ¤íŠ¸", "ëª¨ë¸ë§Â·ë¬¸ì œ í•´ê²°"),
            ("ì „ëµê¸°íš", "ì¥ê¸° ë¡œë“œë§µ ì„¤ê³„"),
            ("ì—°êµ¬ì›", "ê°€ì„¤ ê²€ì¦Â·ì‹¤í—˜ ì„¤ê³„")
        ],
    },
    "ISTP": {
        "traits": ["ë¬¸ì œí•´ê²°", "í˜„ì‹¤ê°ê°", "ì°¨ë¶„í•¨"],
        "careers": [
            ("ê¸°ê³„ ì—”ì§€ë‹ˆì–´", "ì„¤ê³„Â·ì •ë¹„Â·ìµœì í™”"),
            ("ì‘ê¸‰êµ¬ì¡°/ì†Œë°©", "ì‹¤ì „ ìƒí™© ëŒ€ì²˜"),
            ("ë“œë¡  ì •ë¹„/ìš´ìš©", "ì •ë°€ ì¡°ì‘Â·ìœ ì§€ë³´ìˆ˜")
        ],
    },
    "ISFP": {
        "traits": ["ê°ì„±", "ì˜¨í™”", "ì‹¤ìš©ì  ì°½ì˜"],
        "careers": [
            ("ê·¸ë˜í”½ ë””ìì´ë„ˆ", "ê°ê°ì  ì‹œê° í‘œí˜„"),
            ("í”Œë¡œë¦¬ìŠ¤íŠ¸", "ì„¬ì„¸í•œ ë¯¸ì  êµ¬ì„±"),
            ("ì¹˜ê³¼ê¸°ê³µì‚¬", "ì •ë°€ ìˆ˜ì‘ì—…")
        ],
    },
    "INFP": {
        "traits": ["ì´ìƒ", "ì§„ì •ì„±", "ì°½ì‘ ì„±í–¥"],
        "careers": [
            ("ì‘ê°€/ì—ë””í„°", "ê¸€ë¡œ ë©”ì‹œì§€ ì „í•˜ê¸°"),
            ("ì„ìƒì‹¬ë¦¬ì‚¬", "ë‚´ë©´ íƒìƒ‰ê³¼ íšŒë³µ ì§€ì›"),
            ("UX ë¦¬ì„œì²˜", "ì‚¬ìš©ì ê³µê°Â·ë¬¸ì œ ì •ì˜")
        ],
    },
    "INTP": {
        "traits": ["í˜¸ê¸°ì‹¬", "ë…¼ë¦¬", "ì•„ì´ë””ì–´"],
        "careers": [
            ("ì†Œí”„íŠ¸ì›¨ì–´ ì—”ì§€ë‹ˆì–´", "ì¶”ìƒâ†’êµ¬í˜„"),
            ("ê¸°ì´ˆê³¼í•™ ì—°êµ¬ì›", "ì´ë¡  íƒêµ¬"),
            ("íŠ¹í—ˆì „ë¬¸ê°€", "ë°œëª… ë¶„ì„Â·ë¬¸ì„œí™”")
        ],
    },
    "ESTP": {
        "traits": ["í™œë™ì ", "í˜„ì¥ë ¥", "ê²°ë‹¨"],
        "careers": [
            ("ì˜ì—…/ì„¸ì¼ì¦ˆ", "ëŒ€ë©´ ì„¤ë“Â·ì„±ê³¼ ì§€í–¥"),
            ("ìŠ¤í¬ì¸  íŠ¸ë ˆì´ë„ˆ", "ì¦‰ê° í”¼ë“œë°±Â·ë™ê¸°ë¶€ì—¬"),
            ("ì‘ê¸‰êµ¬ì¡°ì‚¬", "í˜„ì¥ íŒë‹¨Â·ì‹¤í–‰")
        ],
    },
    "ESFP": {
        "traits": ["ì‚¬êµì„±", "ì—ë„ˆì§€", "ê°ê°"],
        "careers": [
            ("ì´ë²¤íŠ¸ í”Œë˜ë„ˆ", "í˜„ì¥ ìš´ì˜Â·ì—°ì¶œ"),
            ("ë°©ì†¡/ê³µì—° ìŠ¤íƒœí”„", "íŒ€ì›Œí¬Â·í˜„ì¥ê°"),
            ("ë·°í‹° ì•„í‹°ìŠ¤íŠ¸", "íŠ¸ë Œë“œÂ·í‘œí˜„")
        ],
    },
    "ENFP": {
        "traits": ["ì—´ì •", "ì°½ì˜", "ì‚¬ëŒ ì¤‘ì‹¬"],
        "careers": [
            ("ë§ˆì¼€í„°", "ì•„ì´ë””ì–´Â·ìº í˜ì¸ ì„¤ê³„"),
            ("ì‚¬íšŒí˜ì‹ /ë¹„ì˜ë¦¬ ê¸°íš", "ì˜ë¯¸Â·ì„íŒ©íŠ¸"),
            ("í”„ë¡œë•íŠ¸ ë§¤ë‹ˆì €(ì´ˆê¸°)", "ë¬¸ì œ ë°œê²¬Â·ì¡°ìœ¨")
        ],
    },
    "ENTP": {
        "traits": ["ë„ì „", "í† ë¡ ", "ë°œëª…"],
        "careers": [
            ("ìŠ¤íƒ€íŠ¸ì—… ì°½ì—…ê°€", "ìƒˆë¡œìš´ ê°€ì¹˜ ì°½ì¶œ"),
            ("ì „ëµì»¨ì„¤í„´íŠ¸", "ë¹„ì¦ˆë‹ˆìŠ¤ ë¬¸ì œ í•´ê²°"),
            ("UX ë””ìì´ë„ˆ", "ì‹¤í—˜ì  í”„ë¡œí† íƒ€ì´í•‘")
        ],
    },
    "ESTJ": {
        "traits": ["ì¡°ì§í™”", "ë¦¬ë”ì‹­", "ì‹¤í–‰"],
        "careers": [
            ("í”„ë¡œì íŠ¸ ë§¤ë‹ˆì €", "ëª©í‘œ-ì¼ì •-ì„±ê³¼ ê´€ë¦¬"),
            ("êµ° ì¥êµ", "ê·œìœ¨Â·ì§€íœ˜"),
            ("ìƒì‚°ê´€ë¦¬", "ê³µì • ìµœì í™”")
        ],
    },
    "ESFJ": {
        "traits": ["í˜‘ë ¥", "ë°°ë ¤", "ì‹¤ë¬´ ëŠ¥ë ¥"],
        "careers": [
            ("í•™êµí–‰ì •/í•™ì‚¬ë‹´ë‹¹", "ì¡°ì •Â·ì§€ì›"),
            ("HR ë§¤ë‹ˆì €", "ì¡°ì§ ë¬¸í™”Â·ì±„ìš©"),
            ("ë³‘ì› ì½”ë””ë„¤ì´í„°", "ëŒ€ë©´ ì„œë¹„ìŠ¤")
        ],
    },
    "ENFJ": {
        "traits": ["ë¦¬ë”ì‹­", "ë™ê¸°ë¶€ì—¬", "ì»¤ë®¤ë‹ˆì¼€ì´ì…˜"],
        "careers": [
            ("êµì‚¬", "í•™ìŠµ ì„¤ê³„Â·ì½”ì¹­"),
            ("ì»¤ë®¤ë‹ˆí‹° ë§¤ë‹ˆì €", "ì§‘ë‹¨ ì„±ì¥ ì´‰ì§„"),
            ("HRD/êµìœ¡ê¸°íš", "êµìœ¡ í”„ë¡œê·¸ë¨ ì„¤ê³„")
        ],
    },
    "ENTJ": {
        "traits": ["ë¹„ì „", "ê²°ë‹¨", "ì¡°ì§ ì„¤ê³„"],
        "careers": [
            ("ê²½ì˜ì»¨ì„¤í„´íŠ¸", "ì „ì‚¬ ì „ëµÂ·ë³€í™”ê´€ë¦¬"),
            ("íˆ¬ì/VC", "ì‚¬ì—… ë¶„ì„Â·ì˜ì‚¬ê²°ì •"),
            ("ê¸°ìˆ  PM", "ìŠ¤ì¼€ì¼ì—…Â·ë¡œë“œë§µ")
        ],
    },
}

SUBJECT_TIPS = {
    # ê° ìœ í˜•ì— ì–´ìš¸ë¦¬ëŠ” ê³ ë“±í•™êµ ê³¼ëª©Â·í™œë™ íŒíŠ¸ (í•™ìƒ ì¹œí™” ìš”ì•½)
    "ë¶„ì„í˜•(NT)": ["ìˆ˜í•™â…¡/ë¯¸ì ë¶„", "ë¬¼ë¦¬í•™â… Â·â…¡", "ì •ë³´/í”„ë¡œê·¸ë˜ë°", "ê³¼í•™íƒêµ¬ ë³´ê³ ì„œ"],
    "í˜„ì¥í˜•(ST)": ["ê³µí•™ì¼ë°˜", "ê³¼í•™íƒêµ¬ì‹¤í—˜", "ì§€êµ¬ê³¼í•™â… ", "ì•ˆì „/ì‘ê¸‰ êµìœ¡ ë´‰ì‚¬"],
    "ê³µê°í˜•(NF)": ["ì‚¬íšŒ/ìœ¤ë¦¬", "ì‹¬ë¦¬í•™ ê´€ë ¨ ë…ì„œ", "ë™ì•„ë¦¬ ë©˜í† ë§", "ë´‰ì‚¬Â·ìº í˜ì¸"],
    "ì‹¤ìš©í˜•(SF)": ["ê°€ì •Â·ë³´ê±´", "ë¯¸ìˆ /ë””ìì¸", "ìƒëª…ê³¼í•™â… ", "í˜„ì¥ì²´í—˜Â·í¬íŠ¸í´ë¦¬ì˜¤"],
}

# ë„ìš°ë¯¸ í•¨ìˆ˜

def group_of(mbti: str) -> str:
    # ê°„ë‹¨ ê·¸ë£¹: ë§ˆì§€ë§‰ ë‘ ê¸€ì ê¸°ì¤€ + N/S, T/F
    n = "N" in mbti
    t = "T" in mbti
    sfx = ("NT" if (n and t) else ("NF" if (n and not t) else ("ST" if (not n and t) else "SF")))
    return sfx

# í—¤ë”
st.markdown('<div class="big-title">ğŸ¯ MBTI ê¸°ë°˜ ì§ì—… ì¶”ì²œ (ê³ ë“±í•™ìƒìš©)</div>', unsafe_allow_html=True)
st.write("\n")

col1, col2 = st.columns([1, 1])
with col1:
    st.markdown("**ğŸ‘‰ ë‚´ MBTIë¥¼ ì„ íƒí•˜ì„¸ìš”**")
with col2:
    st.markdown("**ğŸ§­ ì°¸ê³ :** ê²°ê³¼ëŠ” *ì§„ë¡œ íƒìƒ‰ì˜ ì¶œë°œì *ì´ì—ìš”. í™•ì • ë‹µì´ ì•„ë‹ˆë¼ *ë‹¨ì„œ*ì˜ˆìš”!")

user_type = st.selectbox("MBTI ì„ íƒ", MBTI_TYPES, index=MBTI_TYPES.index("ENFP"))

if user_type:
    data = CAREER_DB[user_type]
    tags = " ".join([f"<span class='tag'>#{t}</span>" for t in data["traits"]])

    st.markdown(f"<div class='card'>"
                f"<h3>ğŸ’¼ ì¶”ì²œ ì§ì—… Top 3 â€” <code>{user_type}</code></h3>"
                f"<div class='soft'>íŠ¹ì§•: {tags}</div>"
                f"</div>", unsafe_allow_html=True)

    st.write("")

    for i, (job, why) in enumerate(data["careers"], start=1):
        st.markdown(
            f"""
            <div class='card'>
              <h4>{i}. {job} {'âœ¨' if i==1 else ('ğŸš€' if i==2 else 'ğŸŒ¿')}</h4>
              <div class='soft'>ì´ ìœ í˜•ê³¼ ì˜ ë§ëŠ” ì´ìœ : {why}</div>
            </div>
            """,
            unsafe_allow_html=True,
        )

    st.write("")
    grp = group_of(user_type)
    tips = SUBJECT_TIPS.get({
        "NT": "ë¶„ì„í˜•(NT)",
        "NF": "ê³µê°í˜•(NF)",
        "ST": "í˜„ì¥í˜•(ST)",
        "SF": "ì‹¤ìš©í˜•(SF)",
    }[grp], [])

    with st.expander("ğŸ“˜ ê³¼ëª©Â·í™œë™ íŒíŠ¸ (ê³ 1~ê³ 3)"):
        st.markdown(
            """
            - ğŸ“š **ì¶”ì²œ ê³¼ëª©/í™œë™**: {tips}
            - ğŸ“ **ì‘ì€ ë¯¸ì…˜**: ê´€ì‹¬ ì§ì—… 1ê°œë¥¼ ê³ ë¥´ê³ , í•™êµ í™œë™Â·ë…ì„œÂ·ëŒ€íšŒÂ·ë™ì•„ë¦¬ì—ì„œ *ë‹¹ì¥ í•  ìˆ˜ ìˆëŠ” 1ê°€ì§€*ë¥¼ ì •í•´ë³´ì„¸ìš”.
            - ğŸ§  **í•µì‹¬ íƒœë„**: ê²°ê³¼ë³´ë‹¤ **ê³¼ì • ê¸°ë¡**(ë…¸íŠ¸/í¬íŠ¸í´ë¦¬ì˜¤)ì´ ì§„ë¡œ ìŠ¤í† ë¦¬ë¥¼ ë§Œë“­ë‹ˆë‹¤.
            """.format(tips=", ".join(tips))
        )

# í•˜ë‹¨ ì•ˆë‚´
st.markdown("---")
with st.container():
    st.markdown(
        """
        ğŸ§© **ì£¼ì˜ì‚¬í•­**
        - MBTIëŠ” ì„±ê²© ê²½í–¥ì„ *ê°„ë‹¨íˆ* ë³´ëŠ” ë„êµ¬ì˜ˆìš”. ëª¨ë“  ì‚¬ëŒì€ ìƒí™©ì— ë”°ë¼ ë‹¤ì–‘í•˜ê²Œ í–‰ë™í•  ìˆ˜ ìˆì–´ìš”.
        - ë” ê¹Šì€ íƒìƒ‰ì„ ìœ„í•´ì„œëŠ” **í™€ëœë“œ ê²€ì‚¬(RIASEC)**, **ì ì„±/í¥ë¯¸ ê²€ì‚¬**, **í˜„ì¥ ì²´í—˜**ì„ í•¨ê»˜ ê³ ë ¤í•´ ë³´ì„¸ìš”.
        - í•„ìš”í•˜ë©´ ë‹´ì„/ì§„ë¡œ ìƒë‹´ ì„ ìƒë‹˜ê³¼ ê¼­ ìƒì˜í•˜ì„¸ìš”. ğŸ™Œ
        """
    )

# ì‚¬ì´ë“œë°”: ë¹ ë¥¸ ì•ˆë‚´
with st.sidebar:
    st.markdown("## ğŸ§­ ì‚¬ìš©ë²•")
    st.write("1) MBTI ì„ íƒ â†’ 2) ì¶”ì²œ ì§ì—… ì½ê¸° â†’ 3) ê³¼ëª©Â·í™œë™ íŒíŠ¸ í™•ì¸")
    st.write("\n")
    st.markdown("**Tip**: ë§ˆìŒì´ ëŒë¦¬ëŠ” ì§ì—…ì´ ìˆë‹¤ë©´, í•™êµ í™œë™ê³¼ ì—°ê²°í•´ *ì‘ì€ ì‹¤í—˜*ì„ í•´ë³´ì„¸ìš”!")

# ì•± ì‹¤í–‰ ì•ˆë‚´ (ë¡œì»¬)
if __name__ == "__main__":
    # Streamlitì€ 'streamlit run app.py' í˜•íƒœë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.
    # ì—¬ê¸°ì„œëŠ” ë³„ë„ ì‹¤í–‰ ë¡œì§ì´ í•„ìš” ì—†ìŠµë‹ˆë‹¤.
    pass
